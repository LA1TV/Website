!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Clappr")):"function"==typeof define&&define.amd?define(["Clappr"],t):"object"==typeof exports?exports.ClapprMarkersPlugin=t(require("Clappr")):e.ClapprMarkersPlugin=t(e.Clappr)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2);n(22);var u=n(1),c=r(u),f=n(19),p=r(f),d=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n._markers=[],n._createInitialMarkers(),n}return a(t,e),s(t,[{key:"name",get:function(){return"markers-plugin"}},{key:"attributes",get:function(){return{"class":this.name}}}],[{key:"Marker",get:function(){return c["default"]}},{key:"StandardMarker",get:function(){return p["default"]}},{key:"default",get:function(){return t}}]),s(t,[{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,l.Events.MEDIACONTROL_RENDERED,this._onMediaControlRendered),this.listenTo(this.core.mediaControl,l.Events.MEDIACONTROL_CONTAINERCHANGED,this._onMediaControlContainerChanged)}},{key:"addMarker",value:function(e){var t=this._buildInternalMarker(e);this._markers.push(t),this._createMarkerEl(t),this._renderMarkers()}},{key:"removeMarker",value:function(e){var t=null,n=0;return this._markers.some(function(r){return r.source===e?(t=r,!0):(n++,!1)}),t?(t.$marker.remove(),t.emitter.off("timeChanged",t.timeChangedHandler),t.$tooltipContainer&&t.$tooltipContainer.remove(),t.tooltipChangedHandler&&t.emitter.off("tooltipChanged",t.tooltipChangedHandler),t.onDestroy(),!0):!1}},{key:"_bindContainerEvents",value:function(){this._oldContainer&&(this.stopListening(this._oldContainer,l.Events.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.stopListening(this._oldContainer,l.Events.CONTAINER_MEDIACONTROL_SHOW,this._onMediaControlShow)),this._oldContainer=this.core.mediaControl.container,this.listenTo(this.core.mediaControl.container,l.Events.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(this.core.mediaControl.container,l.Events.CONTAINER_MEDIACONTROL_SHOW,this._onMediaControlShow)}},{key:"_getOptions",value:function(){if(!("markersPlugin"in this.core.options))throw"'markersPlugin' property missing from options object.";return this.core.options.markersPlugin}},{key:"_buildInternalMarker",value:function(e){var t=e.getTooltipEl();return t&&(t=(0,l.$)(t)),{source:e,emitter:e.getEmitter(),$marker:(0,l.$)(e.getMarkerEl()),markerLeft:null,$tooltip:t,$tooltipContainer:null,tooltipContainerLeft:null,tooltipContainerBottom:null,tooltipChangedHandler:null,time:e.getTime(),timeChangedHandler:null,onDestroy:e.onDestroy}}},{key:"_createInitialMarkers",value:function(){var e=this,t=this._getOptions().markers;t&&(this._markers=[],t.forEach(function(t){e._markers.push(e._buildInternalMarker(t))}),this._markers.forEach(function(t){e._createMarkerEl(t)}),this._renderMarkers())}},{key:"_createMarkerEl",value:function(e){var t=this,n=e.$marker;e.timeChangedHandler=function(){t._updateMarkerTime(e)},e.emitter.on("timeChanged",e.timeChangedHandler),n.click(function(n){t.core.mediaControl.container.seek(e.time),n.preventDefault(),n.stopImmediatePropagation()}),this._$markers.append(n);var r=e.$tooltip;if(r){var o=(0,l.$)("<div />").addClass("tooltip-container");e.$tooltipContainer=o,o.append(r),this._$tooltips.append(o),e.tooltipChangedHandler=function(){t._updateTooltipPosition(e)},e.emitter.on("tooltipChanged",e.tooltipChangedHandler),this._updateTooltipPosition(e)}}},{key:"_updateMarkerTime",value:function(e){e.time=e.source.getTime(),this._renderMarkers()}},{key:"_updateTooltipPosition",value:function(e){if(this._mediaControlContainerLoaded){var t=e.$tooltipContainer;if(t){var n=this._getOptions().tooltipBottomMargin||17,r=t.width(),o=this._$tooltips.width(),i=this.core.mediaControl.container.getDuration(),a=o*(e.time/i)-r/2;a=Math.max(0,Math.min(a,o-r)),n===e.tooltipContainerBottom&&a===e.tooltipContainerLeft||(t.css({bottom:n+"px",left:a+"px"}),e.tooltipContainerBottom=n,e.tooltipContainerLeft=a)}}}},{key:"_onMediaControlRendered",value:function(){this._appendElToMediaControl()}},{key:"_onMediaControlContainerChanged",value:function(){this._bindContainerEvents(),this._mediaControlContainerLoaded=!0,this._renderMarkers()}},{key:"_onTimeUpdate",value:function(){this._renderMarkers()}},{key:"_onMediaControlShow",value:function(){this._renderMarkers()}},{key:"_renderMarkers",value:function(){var e=this;if(this._mediaControlContainerLoaded){var t=this.core.mediaControl.container.getDuration();this._markers.forEach(function(n){var r=n.$marker,o=Math.min(Math.max(n.time/t*100,0),100);n.markerLeft!==o&&(r.css("left",o+"%"),n.markerLeft=o),e._updateTooltipPosition(n)})}}},{key:"_appendElToMediaControl",value:function(){this.core.mediaControl.$el.find(".bar-container").first().append(this.el)}},{key:"render",value:function(){this._$markers=(0,l.$)("<div />").addClass("markers-plugin-markers"),this._$tooltips=(0,l.$)("<div />").addClass("markers-plugin-tooltips");var e=(0,l.$)(this.el);return e.append(this._$markers),e.append(this._$tooltips),this._appendElToMediaControl(),this}},{key:"destroy",value:function(){this._markers.forEach(function(e){e.tooltipChangedHandler&&(e.emitter.off("timeChanged",e.timeChangedHandler),e.emitter.off("tooltipChanged",e.tooltipChangedHandler)),e.onDestroy()})}}]),t}(l.UICorePlugin);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),s=r(a),l=function(){function e(){o(this,e),this._emitter=new s["default"]({})}return i(e,[{key:"getEmitter",value:function(){return this._emitter}},{key:"notifyTimeChanged",value:function(){this._emitter.emit("timeChanged")}},{key:"notifyTooltipChanged",value:function(){this._emitter.emit("tooltipChanged")}},{key:"getTime",value:function(){throw"Not implemented!"}},{key:"getMarkerEl",value:function(){throw"Not implemented!"}},{key:"getTooltipEl",value:function(){throw"Not implemented!"}},{key:"onDestroy",value:function(){}}]),e}();t["default"]=l,e.exports=t["default"]},function(t,n){t.exports=e},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(r[i]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){"use strict";var r,o,i,a,s,l,u,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},f=n(5),p=n(14),d=Function.prototype.apply,h=Function.prototype.call,m=Object.create,v=Object.defineProperty,y=Object.defineProperties,_=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return p(t),_.call(this,"__ee__")?n=this.__ee__:(n=g.value=m(null),v(this,"__ee__",g),g.value=null),n[e]?"object"===c(n[e])?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},o=function(e,t){var n,o;return p(t),o=this,r.call(this,e,n=function(){i.call(o,e,n),d.call(t,this,arguments)}),n.__eeOnceListener__=t,this},i=function(e,t){var n,r,o,i;if(p(t),!_.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"===("undefined"==typeof r?"undefined":c(r)))for(i=0;o=r[i];++i)o!==t&&o.__eeOnceListener__!==t||(2===r.length?n[e]=r[i?0:1]:r.splice(i,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},a=function(e){var t,n,r,o,i;if(_.call(this,"__ee__")&&(o=this.__ee__[e]))if("object"===("undefined"==typeof o?"undefined":c(o))){for(n=arguments.length,i=new Array(n-1),t=1;n>t;++t)i[t-1]=arguments[t];for(o=o.slice(),t=0;r=o[t];++t)d.call(r,this,i)}else switch(arguments.length){case 1:h.call(o,this);break;case 2:h.call(o,this,arguments[1]);break;case 3:h.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),t=1;n>t;++t)i[t-1]=arguments[t];d.call(o,this,i)}},s={on:r,once:o,off:i,emit:a},l={on:f(r),once:f(o),off:f(i),emit:f(a)},u=y({},l),e.exports=t=function(e){return null==e?m(u):y(Object(e),l)},t.methods=s},function(e,t,n){"use strict";var r,o=n(6),i=n(13),a=n(9),s=n(16);r=e.exports=function(e,t){var n,r,a,l,u;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],null==e?(n=a=!0,r=!1):(n=s.call(e,"c"),r=s.call(e,"e"),a=s.call(e,"w")),u={value:t,configurable:n,enumerable:r,writable:a},l?o(i(l),u):u},r.gs=function(e,t,n){var r,l,u,c;return"string"!=typeof e?(u=n,n=t,t=e,e=null):u=arguments[3],null==t?t=void 0:a(t)?null==n?n=void 0:a(n)||(u=n,n=void 0):(u=t,t=n=void 0),null==e?(r=!0,l=!1):(r=s.call(e,"c"),l=s.call(e,"e")),c={get:t,set:n,configurable:r,enumerable:l},u?o(i(u),c):c}},function(e,t,n){"use strict";e.exports=n(7)()?Object.assign:n(8)},function(e,t){"use strict";e.exports=function(){var e,t=Object.assign;return"function"!=typeof t?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";var r=n(10),o=n(15),i=Math.max;e.exports=function(e,t){var n,a,s,l=i(arguments.length,2);for(e=Object(o(e)),s=function(r){try{e[r]=t[r]}catch(o){n||(n=o)}},a=1;l>a;++a)t=arguments[a],r(t).forEach(s);if(void 0!==n)throw n;return e}},function(e,t){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";e.exports=n(11)()?Object.keys:n(12)},function(e,t){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t){"use strict";var n=Object.keys;e.exports=function(e){return n(null==e?e:Object(e))}},function(e,t){"use strict";var n=Array.prototype.forEach,r=Object.create,o=function(e,t){var n;for(n in e)t[n]=e[n]};e.exports=function(e){var t=r(null);return n.call(arguments,function(e){null!=e&&o(Object(e),t)}),t}},function(e,t){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t){"use strict";e.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";e.exports=n(17)()?String.prototype.contains:n(18)},function(e,t){"use strict";var n="razdwatrzy";e.exports=function(){return"function"!=typeof n.contains?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},function(e,t){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),u=n(1),c=r(u),f=function(e){function t(e,n){o(this,t);var r=i(this,Object.getPrototypeOf(t).call(this));return r._time=e,r._tooltipText=n||null,r._$marker=r._buildMarkerEl(),r._$tooltip=r._buildTooltipEl(),r._addListeners(),r}return a(t,e),s(t,[{key:"getTime",value:function(){return this._time}},{key:"setTime",value:function(e){this._time=e,this.notifyTimeChanged()}},{key:"getMarkerEl",value:function(){return this._$marker}},{key:"getTooltipEl",value:function(){return this._$tooltip}},{key:"_buildMarkerEl",value:function(){var e=(0,l.$)("<div />").addClass("standard-marker");return e.append((0,l.$)("<div />").addClass("standard-marker-inner")),e}},{key:"_buildTooltipEl",value:function(){return this._tooltipText?(0,l.$)("<div />").addClass("standard-tooltip").text(this._tooltipText):null}},{key:"_addListeners",value:function(){var e=this;if(this._$tooltip){var t=this._$marker,n=!1;t.bind("mouseover",function(){n||(n=!0,e._$tooltip.attr("data-show","1"),e.notifyTooltipChanged())}),t.bind("mouseout",function(){n&&(n=!1,e._$tooltip.attr("data-show","0"))})}}}]),t}(c["default"]);t["default"]=f,e.exports=t["default"]},function(e,t,n){t=e.exports=n(3)(),t.push([e.id,'.markers-plugin{pointer-events:none}.markers-plugin .markers-plugin-markers{overflow:hidden;position:absolute;top:0;bottom:0;left:0;right:0}.markers-plugin .markers-plugin-markers>*{pointer-events:auto}.markers-plugin .markers-plugin-markers .standard-marker{position:absolute;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:2px;left:0;width:20px;height:20px}.markers-plugin .markers-plugin-markers .standard-marker .standard-marker-inner{position:absolute;left:7.5px;top:7.5px;width:5px;height:5px;border-radius:2.5px;box-shadow:0 0 0 3px hsla(0,0%,78%,.2);background-color:#c8c8c8}.markers-plugin .markers-plugin-markers .standard-marker:hover{cursor:pointer}.markers-plugin .markers-plugin-markers .standard-marker:hover .standard-marker-inner{left:6px;top:6px;width:8px;height:8px;border-radius:4px;box-shadow:0 0 0 6px hsla(0,0%,100%,.2);background-color:#fff}.markers-plugin .markers-plugin-tooltips{position:relative;height:0}.markers-plugin .markers-plugin-tooltips .tooltip-container{position:absolute;white-space:nowrap;line-height:normal}.markers-plugin .markers-plugin-tooltips .tooltip-container>*{pointer-events:auto}.markers-plugin .markers-plugin-tooltips .tooltip-container .standard-tooltip{display:none;background-color:rgba(2,2,2,.5);color:#fff;font-size:10px;padding:4px 7px;line-height:normal}.markers-plugin .markers-plugin-tooltips .tooltip-container .standard-tooltip[data-show="1"]{display:inline-block}',""])},function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=d[r.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](r.parts[i]);for(;i<r.parts.length;i++)o.parts.push(u(r.parts[i],t))}else{for(var a=[],i=0;i<r.parts.length;i++)a.push(u(r.parts[i],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function o(e){for(var t=[],n={},r=0;r<e.length;r++){var o=e[r],i=o[0],a=o[1],s=o[2],l=o[3],u={css:a,media:s,sourceMap:l};n[i]?n[i].parts.push(u):t.push(n[i]={id:i,parts:[u]})}return t}function i(e,t){var n=v(),r=g[g.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),g.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=g.indexOf(e);t>=0&&g.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,o;if(t.singleton){var i=_++;n=y||(y=s(t)),r=c.bind(null,n,i,!1),o=c.bind(null,n,i,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),r=p.bind(null,n),o=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=f.bind(null,n),o=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}function c(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=k(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var d={},h=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,_=0,g=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return r(n,t),function(e){for(var i=[],a=0;a<n.length;a++){var s=n[a],l=d[s.id];l.refs--,i.push(l)}if(e){var u=o(e);r(u,t)}for(var a=0;a<i.length;a++){var l=i[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete d[l.id]}}}};var k=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(20);"string"==typeof r&&(r=[[e.id,r,""]]);n(21)(r,{});r.locals&&(e.exports=r.locals)}])});